<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HRMD Manager Dashboard</title>
  <link rel="icon" type="image/png" href="https://i.imgur.com/6SF5KQG.png">
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <link rel="stylesheet" href="adminhr-styles.css">
  <style>

  </style>
</head>

<body>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="logo-circle"><img src="https://i.imgur.com/6SF5KQG.png" alt="logo"></div>
    <h2>Administrator</h2>
    <nav class="nav">
      <button class="tab-btn active" data-tab="irTab">Incident Reports</button>
      <button class="tab-btn" data-tab="caseTab">Case Management</button>
      <button class="tab-btn" data-tab="dbTab">Employee Database</button>
    </nav>
    <button id="logoutBtn">Logout</button>
  </aside>

  <!-- LOADER -->
  <div class="loader-overlay" id="loader" aria-hidden="true">
    <div class="spinner" role="status" aria-hidden="true"></div>
    <p id="loaderTxt">Loading...</p>
  </div>

  <!-- MAIN -->
  <main class="main">
    <h1>Admin Dashboard</h1>

    <!-- INCIDENT REPORTS TAB -->
    <div id="irTab" class="tab-content active">
      <h2 style="color:#fff;margin-bottom:10px;">Incident Reports</h2>

      <div style="display:flex;gap:10px;align-items:center;margin-bottom:15px;">
        <select id="areaFilter"
          style="padding:10px;border-radius:8px;background:#161616;border:1px solid #2d2d2f;color:#fff;">
          <option value="all">All Areas</option>
          <option value="ir_mag_norte">Mag Norte</option>
          <option value="ir_mag_sur">Mag Sur</option>
          <option value="ir_ldn">Lanao Del Norte</option>
          <option value="ir_lds">Lanao Del Sur</option>
          <option value="ir_cot">Cotabato</option>
        </select>
        <button id="filterBtn"
          style="background:#0a84ff;padding:10px 16px;border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;">Filter</button>
        <button id="addIRBtn">+ Add Incident Report</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Transaction Code</th>
            <th>Agent Name</th>
            <th>File</th>
            <th>Date Posted</th>
            <th>Area</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="reportsTbody"></tbody>
      </table>
    </div>


    <!-- CASE MANAGEMENT TAB -->
    <div id="caseTab" class="tab-content">
      <h2 style="margin-bottom:8px;color:#fff;">Case Management</h2>
      <form id="caseForm" style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:12px;">
        <input id="case_area" placeholder="Area" required style="flex:1;min-width:180px;">
        <input id="case_name" placeholder="Case" required style="flex:2;min-width:220px;">
        <input id="case_employees" placeholder="Employee(s) Involved" required style="flex:2;min-width:220px;">
        <input id="case_officer" placeholder="Grievance Officer" required style="flex:1;min-width:160px;">
        <button type="submit" id="addCaseBtn" class="action-btn"
          style="background:#0a84ff;color:#fff;border-radius:10px;padding:10px 14px;">Add Case</button>
      </form>

      <table>
        <thead>
          <tr>
            <th>Case</th>
            <th>Area</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="caseTbody"></tbody>
      </table>
    </div>


    <div id="dbTab" class="tab-content">
      <h2 style="margin-bottom:8px;color:#fff;">Employee Database</h2>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <input id="empSearch" class="search-input" placeholder="Search name, position, email or mobile...">
        <div class="small-muted">Records Loaded.</div>
      </div>

      <table>
        <thead>
          <tr>
            <th>Name (English)</th>
            <th>Position</th>
            <th>Email</th>
            <th>Mobile</th>
          </tr>
        </thead>
        <tbody id="dbTbody"></tbody>
      </table>
    </div>

    <div class="watermark">Designed & Developed by: <strong>Edwin Angelo Catequista</strong></div>
  </main>

  <div class="modal" id="irModal">
    <div class="modal-card">
      <h3 id="modalTitle">Add Incident Report</h3>
      <form id="irForm">
        <input type="hidden" id="irId">
        <input id="agent_name" type="text" placeholder="Agent name" required>
        <input id="area" type="text" placeholder="Area" required>
        <input id="date_posted" type="date" required>
        <select id="status" required>
          <option value="">Select Status</option>
          <option value="Open">Open</option>
          <option value="Closed">Closed</option>
          <option value="Pending">Pending</option>
        </select>
        <input id="file" type="file" accept=".pdf,.doc,.docx,.jpg,.png">
        <div id="filePreview" style="margin-bottom:10px;"></div>
        <div style="display:flex;gap:10px;justify-content:flex-end;">
          <button type="button" id="closeModalBtn" class="action-btn"
            style="background:#444;color:#fff;">Cancel</button>
          <button type="submit" id="saveBtn" class="action-btn" style="background:#0a84ff;color:#fff;">Save</button>
        </div>
        <div id="formMsg" style="margin-top:8px;color:#ffcc00;display:none;"></div>
      </form>
    </div>
  </div>

  <div id="caseModal" class="modal" aria-hidden="true">
    <div class="modal-card" style="width:820px; max-width:95%;">
      <span style="position:absolute; right:18px; top:12px; font-size:20px; color:#aaa; cursor:pointer;"
        id="closeCaseModal">&times;</span>
      <h3 id="caseModalTitle">Case Details</h3>

      <div id="caseDetailsContainer" style="margin-top:8px;">
        <div style="display:flex;gap:10px;flex-wrap:wrap;">
          <div style="flex:1;min-width:220px;">
            <div class="small-muted">Case</div>
            <div id="detail_case_name" style="margin-bottom:8px;"></div>
            <div class="small-muted">Area</div>
            <div id="detail_area" style="margin-bottom:8px;"></div>
            <div class="small-muted">Employees</div>
            <div id="detail_employees" style="margin-bottom:8px;"></div>
            <div class="small-muted">Officer</div>
            <div id="detail_officer" style="margin-bottom:8px;"></div>
            <div class="small-muted">File</div>
            <div id="detail_file_link" style="margin-bottom:8px;"></div>
          </div>
          <div style="flex:1;min-width:200px;">
            <div class="small-muted">STATUS</div>
            <select id="detail_STATUS"
              style="width:100%;padding:10px;border-radius:8px;background:#161616;border:1px solid #2d2d2f;color:#fff;">
              <option value="OPEN">OPEN</option>
              <option value="NTE">IR</option>
              <option value="NTE">NTE</option>
              <option value="AH">AH</option>
              <option value="NTW">NTW</option>
              <option value="NTD">NTD</option>
            </select>
          </div>
        </div>
        <div style="display:flex;align-items:center;justify-content:flex-end;margin-top:18px;">
          <div id="savedMsg" style="margin-right:auto;color:#4cd964;font-weight:600;opacity:0;transition:opacity .2s;">
            Status updated!</div>
          <button class="action-btn" id="cancelCaseBtn" style="background:#444;color:#fff;">Close</button>
          <button class="action-btn" id="saveCaseBtn"
            style="background:#00b37e;color:#fff;display:none;margin-left:8px;">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div id="empModal" class="modal" aria-hidden="true">
    <div class="modal-card" style="width:820px; max-width:95%;">
      <span style="position:absolute; right:18px; top:12px; font-size:20px; color:#aaa; cursor:pointer;"
        id="closeEmpModal">&times;</span>
      <h3 id="empModalTitle">Employee Profile</h3>

      <div style="display:flex;gap:16px;flex-wrap:wrap;margin-top:8px;">
        <div style="min-width:140px; text-align:center;">
          <img id="empPhoto" src="" alt="Employee photo"
            style="width:120px;height:120px;border-radius:999px;object-fit:cover;border:3px solid #1e1e1f;">
        </div>
        <div style="flex:1;min-width:280px;">
          <div class="small-muted">Name (English)</div>
          <div id="emp_name_english"></div>
          <div class="small-muted">Name (Chinese)</div>
          <div id="emp_name_chinese"></div>
          <div class="small-muted">Position</div>
          <div id="emp_position"></div>
          <div class="small-muted">Sex</div>
          <div id="emp_sex"></div>
          <div class="small-muted">Blood Type</div>
          <div id="emp_blood_type"></div>
        </div>
        <div style="flex:1;min-width:220px;">
          <div class="small-muted">Email</div>
          <div id="emp_email"></div>
          <div class="small-muted">Mobile</div>
          <div id="emp_mobile"></div>
          <div class="small-muted">ID Card</div>
          <div id="emp_id_card"></div>
          <div class="small-muted">DOB</div>
          <div id="emp_dob"></div>
        </div>
      </div>

      <div style="display:flex;justify-content:flex-end;margin-top:16px;">
        <button class="action-btn" id="closeEmpBtn" style="background:#444;color:#fff;">Close</button>
      </div>
    </div>
  </div>
 <script src="admin.js"></script>



  </script>
</body>

</html>